<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teknologi untuk Down Syndrome</title>
  <style>
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: url("https://files.catbox.moe/tonq7z.jpeg") no-repeat center center fixed;
      background-size: cover;
      color:#123;
      padding:40px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .container{
      max-width:800px;
      background:#ffffffcc;
      border-radius:12px;
      padding:40px;
      box-shadow:0 4px 12px rgba(0,0,0,.2);
    }
    h1{
      text-align:center;
      color:#1a3;
    }
    .card{
      background:#f0f8ff;
      border-radius:10px;
      padding:20px;
      margin:30px 0;
      box-shadow:0 2px 6px rgba(0,0,0,.15);
    }
    button{
      background:#3498db;
      color:white;
      border:none;
      padding:10px 15px;
      border-radius:8px;
      cursor:pointer;
      font-size:16px;
    }
    button:hover{
      background:#217dbb;
    }
    .picture-board{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:10px;
      text-align:center;
    }
    .picture-board img{
      width:50px;
      height:50px;
      display:block;
      margin:0 auto 5px;
    }
    .schedule-item{
      background:#e8f5e9;
      padding:10px;
      margin:5px 0;
      border-radius:6px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Aplikasi Bantu Down Syndrome</h1><!-- Text-to-Speech -->
<div class="card">
  <h2>Text to Speech</h2>
  <textarea id="ttsInput" rows="3" style="width:100%" placeholder="Tulis teks di sini..."></textarea><br><br>
  <button onclick="speakText()">Bacakan</button>
  <label>Kecepatan: <input type="range" id="rate" min="0.5" max="2" step="0.1" value="1"></label>
</div>

<!-- Picture Board dengan gambar URL -->
<div class="card">
  <h2>Picture Board (komunikasi cepat)</h2>
  <p>Ketuk gambar untuk mendengar kata & berbagi.</p>
  <div class="picture-board">
    <div class="card" onclick="speak('Apel')">
      <img src="https://files.catbox.moe/ikrtvx.jpg" alt="Apel">
      Apel
    </div>
    <div class="card" onclick="speak('Mangga')">
      <img src="https://files.catbox.moe/v12ijh.jpg" alt="Mangga">
      Mangga
    </div>
    <div class="card" onclick="speak('Semangka')">
      <img src="https://files.catbox.moe/fpnj1k.jpg" alt="Semangka">
      Semangka
    </div>
    <div class="card" onclick="speak('Terong')">
      <img src="https://files.catbox.moe/p97alk.jpg" alt="Terong">
      Terong
    </div>
    <div class="card" onclick="speak('Bayam')">
      <img src="https://files.catbox.moe/2kqopv.jpg" alt="Bayam">
      Bayam
    </div>
    <div class="card" onclick="speak('Buncis')">
      <img src="https://files.catbox.moe/a7adh6.jpg" alt="Buncis">
      Buncis
    </div>
   <div class="card" onclick="speak('Gajah')">
      <img src="https://files.catbox.moe/70ouck.jpg" alt="Gajah">
      Gajah
    </div>
   <div class="card" onclick="speak('Kelinci')">
      <img src="https://files.catbox.moe/9uopjx.jpg" alt="Kelinci">
      Kelinci
    </div>
    <div class="card" onclick="speak('Badak')">
      <img src="https://files.catbox.moe/51frdy.jpg" alt="Badak">
      Badak
    </div>
  </div>
</div>

<div class="game">
  <h2>Game Tebak Gambar</h2>
  <p>Tebak nama dari gambar yang muncul!</p>
  <div id="gambar-tebak" style="margin:20px;">
    <img id="gambar" src="" alt="Gambar tebakan" width="120">
  </div>

  <input type="text" id="jawaban" placeholder="Ketik jawaban di sini">
  <button onclick="cekJawaban()">Cek Jawaban</button>
  <p id="hasil"></p>
</div>

<script>
  // daftar semua gambar + jawabannya
  const gambarList = [
    {src: "https://files.catbox.moe/ikrtvx.jpg", nama: "apel"},
    {src: "https://files.catbox.moe/v12ijh.jpg", nama: "mangga"},
    {src: "https://files.catbox.moe/fpnj1k.jpg", nama: "semangka"},
    {src: "https://files.catbox.moe/p97alk.jpg", nama: "terong"},
    {src: "https://files.catbox.moe/2kqopv.jpg", nama: "bayam"},
    {src: "https://files.catbox.moe/a7adh6.jpg", nama: "buncis"},
    {src: "https://files.catbox.moe/70ouck.jpg", nama: "gajah"},
    {src: "https://files.catbox.moe/9uopjx.jpg", nama: "kelinci"},
    {src: "https://files.catbox.moe/51frdy.jpg", nama: "badak"}
  ];

  let currentIndex = 0;

  function tampilkanGambar() {
    const gambar = gambarList[currentIndex];
    document.getElementById("gambar").src = gambar.src;
    document.getElementById("hasil").innerText = "";
    document.getElementById("jawaban").value = "";
  }

  function cekJawaban() {
    const input = document.getElementById("jawaban").value.toLowerCase().trim();
    const jawabanBenar = gambarList[currentIndex].nama;

    if (input === jawabanBenar) {
      document.getElementById("hasil").innerText = "‚úÖ Benar!";
      currentIndex = (currentIndex + 1) % gambarList.length;
      setTimeout(tampilkanGambar, 1000);
    } else {
      document.getElementById("hasil").innerText = "‚ùå Salah, coba lagi!";
    }
  }

  // tampilkan pertama kali
  tampilkanGambar();
</script>

<!-- Game Edukasi (perbaikan: desktop drag&drop + mobile tap-to-place) -->
<div class="card" id="game-edu">
  <h2>Game Edukasi</h2>
  <p>Seret bentuk ke kotak yang sesuai ‚Äî atau ketuk bentuk lalu ketuk kotak (mode mobile).</p>

  <div style="display:flex; gap:40px; justify-content:center; align-items:center; margin:20px 0;">
    <!-- bentuk: beri class "shape" & atribut data-shape -->
    <div id="circle" class="shape" data-shape="circle" draggable="true"
         ondragstart="drag(event)" onmousedown="dragStart(event)" ontouchstart="touchStart(event)"
         style="text-align:center; cursor:grab;">
      <div style="width:60px;height:60px;border-radius:50%;background:red;margin:0 auto 6px;"></div>
      <div>Lingkaran</div>
    </div>

    <div id="square" class="shape" data-shape="square" draggable="true"
         ondragstart="drag(event)" onmousedown="dragStart(event)" ontouchstart="touchStart(event)"
         style="text-align:center; cursor:grab;">
      <div style="width:60px;height:60px;background:blue;margin:0 auto 6px;"></div>
      <div>Persegi</div>
    </div>

    <div id="triangle" class="shape" data-shape="triangle" draggable="true"
         ondragstart="drag(event)" onmousedown="dragStart(event)" ontouchstart="touchStart(event)"
         style="text-align:center; cursor:grab;">
      <div style="width:0;height:0;border-left:30px solid transparent;border-right:30px solid transparent;border-bottom:60px solid green;margin:0 auto 6px;"></div>
      <div>Segitiga</div>
    </div>
  </div>

  <h3 style="text-align:center;">Kotak Tujuan</h3>
  <div style="display:flex; gap:20px; justify-content:center; margin-top:8px;">
    <div class="dropzone" data-shape="circle" ondragover="allowDrop(event)" ondrop="drop(event)"
         onclick="dropByClick(event)" ontouchend="dropByClick(event)"
         style="width:110px;height:110px;border:2px dashed #aaa;display:flex;align-items:center;justify-content:center;flex-direction:column;">
      Lingkaran
    </div>
    <div class="dropzone" data-shape="square" ondragover="allowDrop(event)" ondrop="drop(event)"
         onclick="dropByClick(event)" ontouchend="dropByClick(event)"
         style="width:110px;height:110px;border:2px dashed #aaa;display:flex;align-items:center;justify-content:center;flex-direction:column;">
      Persegi
    </div>
    <div class="dropzone" data-shape="triangle" ondragover="allowDrop(event)" ondrop="drop(event)"
         onclick="dropByClick(event)" ontouchend="dropByClick(event)"
         style="width:110px;height:110px;border:2px dashed #aaa;display:flex;align-items:center;justify-content:center;flex-direction:column;">
      Segitiga
    </div>
  </div>

  <p id="gameMessage" style="text-align:center;font-weight:bold;color:#1a3;margin-top:12px;"></p>
  <div style="text-align:center;margin-top:8px;">
    <button onclick="resetGame()">Reset Game</button>
  </div>
</div>

<script>
  // fallback & state
  let lastSelectedShapeId = null; // dipakai untuk mobile / klik-taruh

  function allowDrop(ev) {
    ev.preventDefault();
  }

  // dragstart untuk desktop
  function drag(ev) {
    try {
      ev.dataTransfer.setData("text/plain", ev.target.id);
    } catch(e){}
    // simpan juga ke fallback
    const el = ev.target.closest('.shape');
    if(el) lastSelectedShapeId = el.id;
  }

  // beberapa browser memberi target berbeda saat mulai drag; normalisasi
  function dragStart(ev){
    const el = ev.target.closest('.shape');
    if(el) lastSelectedShapeId = el.id;
  }

  // touchstart / klik bentuk: pilih bentuk untuk mobile
  function touchStart(ev){
    ev.preventDefault(); // mencegah gesture default di mobile
    const el = ev.target.closest('.shape');
    if(!el) return;
    // highlight pilihan
    document.querySelectorAll('.shape').forEach(s=> s.style.outline='none');
    el.style.outline='3px solid #ffd54f';
    lastSelectedShapeId = el.id;
    document.getElementById('gameMessage').textContent = 'Bentuk dipilih: ' + labelOf(el.getAttribute('data-shape')) + '. Ketuk kotak tujuan.';
    document.getElementById('gameMessage').style.color = '#333';
  }

  // drop (desktop)
  function drop(ev) {
    ev.preventDefault();
    const zone = ev.target.closest('.dropzone');
    if(!zone) return;

    // try dataTransfer first, else fallback to lastSelectedShapeId
    let draggedId = '';
    try { draggedId = ev.dataTransfer.getData('text/plain') || lastSelectedShapeId; } catch(e) { draggedId = lastSelectedShapeId; }

    handlePlacement(zone, draggedId);
  }

  // when user taps a dropzone (mobile fallback)
  function dropByClick(ev){
    ev.preventDefault();
    const zone = ev.target.closest('.dropzone');
    if(!zone) return;
    if(!lastSelectedShapeId){
      document.getElementById('gameMessage').textContent = 'Pilih dulu bentuknya (ketuk salah satu bentuk).';
      document.getElementById('gameMessage').style.color = 'orange';
      return;
    }
    handlePlacement(zone, lastSelectedShapeId);
  }

  // core placement logic (shared)
  function handlePlacement(zone, draggedId){
    if(!draggedId) return;
    const draggedEl = document.getElementById(draggedId);
    // jika id tidak ditemukan, coba cari elemen yang punya data-shape cocok dengan draggedId
    let draggedShapeName = draggedEl ? draggedEl.getAttribute('data-shape') : draggedId;

    const targetShape = zone.getAttribute('data-shape');

    if(!draggedShapeName || !targetShape){
      return;
    }

    // bandingkan after normalizing
    if(draggedShapeName.trim().toLowerCase() === targetShape.trim().toLowerCase()){
      // sukses: 'tempelkan' clone ke dalam zone
      zone.innerHTML = ''; // kosongkan teks (mis. "Lingkaran")
      const clone = (draggedEl ? draggedEl.cloneNode(true) : document.createElement('div'));
      // bersihkan clone agar tidak draggable lagi
      clone.style.cursor = 'default';
      clone.setAttribute('draggable','false');
      clone.style.outline='none';
      // jika clone adalah wrapper .shape, ambil hanya tampilan (untuk rapi)
      if(clone.classList && clone.classList.contains('shape')){
        // buat tampilan kecil (sederhana) dari child bentuk (ambil child pertama)
        const visual = clone.querySelector('div');
        const label = document.createElement('div');
        label.textContent = labelOf(targetShape);
        label.style.marginTop='6px';
        label.style.fontSize='14px';
        // bungkus visual agar center
        const wrapper = document.createElement('div');
        wrapper.style.display='flex';
        wrapper.style.flexDirection='column';
        wrapper.style.alignItems='center';
        if(visual) wrapper.appendChild(visual.cloneNode(true));
        wrapper.appendChild(label);
        zone.appendChild(wrapper);
      } else {
        zone.appendChild(clone);
      }

      document.getElementById('gameMessage').textContent = '‚úÖ Benar! ' + labelOf(targetShape) + ' cocok.';
      document.getElementById('gameMessage').style.color = 'green';

      // clear selection
      lastSelectedShapeId = null;
      document.querySelectorAll('.shape').forEach(s=> s.style.outline='none');
    } else {
      document.getElementById('gameMessage').textContent = '‚ùå Coba lagi, itu bukan ' + labelOf(targetShape) + '.';
      document.getElementById('gameMessage').style.color = 'red';
    }
  }

  // helper: ubah kode shape ke label Bahasa Indonesia
  function labelOf(shapeKey){
    const map = { circle:'Lingkaran', square:'Persegi', triangle:'Segitiga' };
    return (map[shapeKey] || shapeKey);
  }

  // reset game
  function resetGame(){
    // kembalikan teks default di setiap dropzone dan hapus isi
    document.querySelectorAll('.dropzone').forEach(z=>{
      z.innerHTML = labelOf(z.getAttribute('data-shape'));
    });
    // kembalikan outline dan state
    document.querySelectorAll('.shape').forEach(s=> s.style.outline='none');
    lastSelectedShapeId = null;
    document.getElementById('gameMessage').textContent = '';
  }
</script>

    <div class="game">
  <h2>Game Tebak Warna</h2>
  <p id="instruksi"></p>
  <div style="display:flex; gap:20px; margin:20px;">
    <div class="kotak-warna" style="width:80px; height:80px; background:red;" onclick="cekWarna('merah')"></div>
    <div class="kotak-warna" style="width:80px; height:80px; background:blue;" onclick="cekWarna('biru')"></div>
    <div class="kotak-warna" style="width:80px; height:80px; background:green;" onclick="cekWarna('hijau')"></div>
    <div class="kotak-warna" style="width:80px; height:80px; background:yellow;" onclick="cekWarna('kuning')"></div>
  </div>
  <p id="hasil-warna"></p>
</div>

<script>
  const warnaList = ["merah", "biru", "hijau", "kuning"];
  let warnaBenar = "";

  function tampilkanInstruksi() {
    const random = Math.floor(Math.random() * warnaList.length);
    warnaBenar = warnaList[random];
    document.getElementById("instruksi").innerText = "Klik warna: " + warnaBenar.toUpperCase();
    document.getElementById("hasil-warna").innerText = "";
  }

  function cekWarna(pilihan) {
    if (pilihan === warnaBenar) {
      document.getElementById("hasil-warna").innerText = "‚úÖ Benar!";
      setTimeout(tampilkanInstruksi, 1000);
    } else {
      document.getElementById("hasil-warna").innerText = "‚ùå Salah, coba lagi!";
    }
  }

  // tampilkan pertama kali
  tampilkanInstruksi();
</script>

    <!doctype html>

<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Game Angka Edukasi ‚Äî Untuk Anak Down Syndrome</title>
  <style>
    :root{
      --bg:#f6fbff; --card:#fff; --accent:#4fbeff; --success:#4caf50; --muted:#6b7280;
      --radius:14px; --pad:16px;
    }
    *{box-sizing:border-box}
    body{font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial; margin:0; background:linear-gradient(180deg,var(--bg),#e9f6ff); color:#073642}
    .container{max-width:980px;margin:20px auto;padding:18px}
    header{display:flex;gap:12px;align-items:center}
    h1{font-size:1.6rem;margin:0}
    p.lead{margin:4px 0 0;color:var(--muted)}.card{background:var(--card);border-radius:var(--radius);padding:var(--pad);box-shadow:0 6px 18px rgba(7,54,66,0.06)}

.controls{display:flex;gap:10px;align-items:center;margin-top:12px}
.btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:12px;border:0;font-weight:600;cursor:pointer}
.btn.secondary{background:#eef6fb;color:#073642}

.game-area{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:16px}
@media (max-width:720px){.game-area{grid-template-columns:1fr}}

.objects-area{min-height:220px;display:flex;flex-wrap:wrap;gap:10px;align-items:flex-start;padding:12px;justify-content:center}
.object{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.4rem;background:linear-gradient(180deg,#fff,#f3fbff);box-shadow:0 4px 8px rgba(15,76,106,0.06);user-select:none}

.panel{padding:12px}
.number-choices{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
.choice{min-width:64px;padding:10px 12px;border-radius:12px;text-align:center;font-size:1.2rem;border:2px dashed transparent;cursor:pointer}
.choice:hover{transform:translateY(-3px)}
.choice.correct{border-color:var(--success);background:linear-gradient(180deg,#e9fff0,#f5fffb)}
.choice.wrong{border-color:#ff6b6b;background:linear-gradient(180deg,#fff0f0,#fff6f6)}

.status{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-top:10px}
.big{font-size:2rem;font-weight:700}
footer{margin-top:18px;text-align:center;color:var(--muted);font-size:.9rem}

/* focus, accessibility */
.choice:focus{outline:3px solid rgba(79,190,255,0.3)}

  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="card" style="padding:12px 16px;display:flex;align-items:center;gap:12px">
        <div style="font-size:1.6rem">üî¢</div>
        <div>
          <h1>Game Angka ‚Äî Belajar Menghitung</h1>
          <p class="lead">Dirancang simpel, penuh dorongan positif, ukuran besar dan suara untuk membantu anak Down Syndrome.</p>
        </div>
      </div>
    </header><section class="card" style="margin-top:14px">
  <div class="controls">
    <button id="startBtn" class="btn">Mulai Permainan</button>
    <button id="speakBtn" class="btn secondary">Ulangi Suara</button>
    <label style="margin-left:auto;display:flex;gap:8px;align-items:center">
      <span>Kesulitan:</span>
      <select id="difficulty" style="padding:8px;border-radius:8px;border:1px solid #dbeafe">
        <option value="1">Mudah (1‚Äì5)</option>
        <option value="2">Sedang (1‚Äì10)</option>
        <option value="3">Sulit (1‚Äì20)</option>
      </select>
    </label>
  </div>

  <div class="game-area">
    <div class="panel card">
      <div style="text-align:center">
        <div style="font-size:1.1rem;margin-bottom:8px">Benda ‚Äî Hitung dan pilih angka</div>
        <div id="objects" class="objects-area" aria-live="polite" aria-label="Area benda untuk dihitung">
          <!-- objek tampil di sini -->
        </div>
      </div>

      <div class="status">
        <div>Skor: <span id="score">0</span></div>
        <div>Kesempatan: <span id="lives">3</span></div>
        <div id="message" style="color:var(--muted)"></div>
      </div>
    </div>

    <div class="panel card">
      <div style="text-align:center;margin-bottom:8px">Pilih Angka yang Benar</div>
      <div id="choices" class="number-choices" role="list">
        <!-- pilihan angka -->
      </div>

      <div style="text-align:center;margin-top:12px">
        <button id="nextBtn" class="btn secondary">Lewati</button>
      </div>
    </div>
  </div>

</section>

<footer>
  Tips: Klik "Mulai Permainan" lalu tekan tombol "Ulangi Suara" jika ingin mendengar instruksi lagi. Cocok dipakai bersama pengawas/terapis.
</footer>

 <!doctype html>

<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Game Angka Edukasi ‚Äî Untuk Anak Down Syndrome</title>
  <style>
    :root{
      --bg:#f6fbff; --card:#fff; --accent:#4fbeff; --success:#4caf50; --muted:#6b7280;
      --radius:14px; --pad:16px;
    }
    *{box-sizing:border-box}
    body{font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial; margin:0; background:linear-gradient(180deg,var(--bg),#e9f6ff); color:#073642}
    .container{max-width:980px;margin:20px auto;padding:18px}
    header{display:flex;gap:12px;align-items:center}
    h1{font-size:1.6rem;margin:0}
    p.lead{margin:4px 0 0;color:var(--muted)}.card{background:var(--card);border-radius:var(--radius);padding:var(--pad);box-shadow:0 6px 18px rgba(7,54,66,0.06)}

.controls{display:flex;gap:10px;align-items:center;margin-top:12px}
.btn{background:var(--accent);color:#fff;padding:10px 14px;border-radius:12px;border:0;font-weight:600;cursor:pointer}
.btn.secondary{background:#eef6fb;color:#073642}

.game-area{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:16px}
@media (max-width:720px){.game-area{grid-template-columns:1fr}}

.objects-area{min-height:220px;display:flex;flex-wrap:wrap;gap:10px;align-items:flex-start;padding:12px;justify-content:center}
.object{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;font-size:1.8rem;background:linear-gradient(180deg,#fff,#f3fbff);box-shadow:0 4px 8px rgba(15,76,106,0.06);user-select:none}

.panel{padding:12px}
.number-choices{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
.choice{min-width:64px;padding:10px 12px;border-radius:12px;text-align:center;font-size:1.2rem;border:2px dashed transparent;cursor:pointer}
.choice:hover{transform:translateY(-3px)}
.choice.correct{border-color:var(--success);background:linear-gradient(180deg,#e9fff0,#f5fffb)}
.choice.wrong{border-color:#ff6b6b;background:linear-gradient(180deg,#fff0f0,#fff6f6)}

.status{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-top:10px}
.big{font-size:2rem;font-weight:700}
footer{margin-top:18px;text-align:center;color:var(--muted);font-size:.9rem}

.choice:focus{outline:3px solid rgba(79,190,255,0.3)}

.confetti{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:9999;background:transparent !important;}

  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="card" style="padding:12px 16px;display:flex;align-items:center;gap:12px">
        <div style="font-size:1.6rem">üî¢</div>
        <div>
          <h1>Game Angka ‚Äî Belajar Menghitung</h1>
          <p class="lead">Game edukasi dengan suara, pilihan gambar, level, skor tersimpan, dan hadiah confetti. Dirancang untuk anak Down Syndrome.</p>
        </div>
      </div>
    </header><section class="card" style="margin-top:14px">
  <div class="controls">
    <button id="startBtn" class="btn">Mulai Permainan</button>
    <button id="speakBtn" class="btn secondary">Ulangi Suara</button>
    <label style="margin-left:auto;display:flex;gap:8px;align-items:center">
      <span>Kesulitan:</span>
      <select id="difficulty" style="padding:8px;border-radius:8px;border:1px solid #dbeafe">
        <option value="1">Mudah (1‚Äì5)</option>
        <option value="2">Sedang (1‚Äì10)</option>
        <option value="3">Sulit (1‚Äì20)</option>
      </select>
    </label>
    <label style="margin-left:12px;display:flex;gap:8px;align-items:center">
      <span>Bahasa:</span>
      <select id="language" style="padding:8px;border-radius:8px;border:1px solid #dbeafe">
        <option value="id">Indonesia</option>
        <option value="en">English</option>
      </select>
    </label>
  </div>

  <div class="game-area">
    <div class="panel card">
      <div style="text-align:center">
        <div style="font-size:1.1rem;margin-bottom:8px">Benda ‚Äî Hitung dan pilih angka</div>
        <div id="objects" class="objects-area" aria-live="polite" aria-label="Area benda untuk dihitung">
        </div>
      </div>

      <div class="status">
        <div>Skor: <span id="score">0</span></div>
        <div>Rekor: <span id="highscore">0</span></div>
        <div>Kesempatan: <span id="lives">3</span></div>
        <div id="message" style="color:var(--muted)"></div>
      </div>
    </div>

    <div class="panel card">
      <div style="text-align:center;margin-bottom:8px">Pilih Angka yang Benar</div>
      <div id="choices" class="number-choices" role="list"></div>
      <div style="text-align:center;margin-top:12px">
        <button id="nextBtn" class="btn secondary">Lewati</button>
      </div>
    </div>
  </div>

</section>

<footer>
  Tips: Klik "Mulai Permainan" lalu tekan tombol "Ulangi Suara" jika ingin mendengar instruksi lagi. Skor terbaik akan tersimpan otomatis.
</footer>

  </div><canvas id="confetti" class="confetti"></canvas>

<script>
const startBtn = document.getElementById('startBtn');
const speakBtn = document.getElementById('speakBtn');
const objectsEl = document.getElementById('objects');
const choicesEl = document.getElementById('choices');
const scoreEl = document.getElementById('score');
const livesEl = document.getElementById('lives');
const messageEl = document.getElementById('message');
const difficultyEl = document.getElementById('difficulty');
const nextBtn = document.getElementById('nextBtn');
const highscoreEl = document.getElementById('highscore');
const languageEl = document.getElementById('language');

let score = 0; let lives = 3; let currentAnswer = null;
let highscore = parseInt(localStorage.getItem('highscore')||'0');
highscoreEl.textContent = highscore;

const images = ['üçé','üöó','‚öΩ','üê∂','üéà','üåü'];

function speak(text){
  if (!window.speechSynthesis) return;
  window.speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(text);
  u.lang = languageEl.value==='id' ? 'id-ID' : 'en-US';
  u.rate = 0.9;
  window.speechSynthesis.speak(u);
}

function randInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}

function renderObjects(count){
  objectsEl.innerHTML = '';
  const icon = images[randInt(0,images.length-1)];
  for(let i=0;i<count;i++){
    const d = document.createElement('div');
    d.className='object';
    d.innerHTML = icon;
    objectsEl.appendChild(d);
  }
}

function buildChoices(correct, difficulty){
  choicesEl.innerHTML='';
  const variants = new Set();
  variants.add(correct);
  while(variants.size<4){
    let add = randInt(1, difficulty===1?5: difficulty===2?10:20);
    variants.add(add);
  }
  const arr = Array.from(variants).sort((a,b)=>a-b);
  arr.forEach(n=>{
    const btn = document.createElement('button');
    btn.className = 'choice';
    btn.setAttribute('role','listitem');
    btn.innerText = n;
    btn.addEventListener('click',()=>onChoice(n,btn));
    choicesEl.appendChild(btn);
  });
}

function onChoice(n,btn){
  if (currentAnswer===null) return;
  if (n === currentAnswer){
    btn.classList.add('correct');
    score += 1;
    messageEl.textContent = languageEl.value==='id' ? 'Bagus! Jawaban benar.' : 'Great! Correct answer.';
    speak(messageEl.textContent);
    if(score>highscore){ highscore=score; localStorage.setItem('highscore',highscore); highscoreEl.textContent=highscore; }
    launchConfetti();
  } else {
    btn.classList.add('wrong');
    lives -= 1;
    messageEl.textContent = languageEl.value==='id' ? 'Coba lagi ya.' : 'Try again.';
    speak(messageEl.textContent);
  }
  updateHUD();
  Array.from(choicesEl.children).forEach(c=>c.disabled=true);
}

function updateHUD(){
  scoreEl.textContent = score;
  livesEl.textContent = lives;
}

function nextRound(){
  if (lives <= 0){
    const msg = languageEl.value==='id' ? `Permainan selesai. Skor akhir ${score} poin.` : `Game over. Final score ${score} points.`;
    speak(msg);
    messageEl.textContent = msg;
    return;
  }
  const diff = parseInt(difficultyEl.value);
  let max = diff===1?5: diff===2?10:20;
  const count = randInt(1, Math.min(max,8));
  currentAnswer = count;
  renderObjects(count);
  buildChoices(currentAnswer,diff);
  messageEl.textContent = languageEl.value==='id' ? 'Hitung benda lalu pilih angka yang sesuai.' : 'Count the objects and choose the correct number.';
  speak(messageEl.textContent);
}

startBtn.addEventListener('click', ()=>{
  score = 0; lives = 3; currentAnswer = null; updateHUD();
  messageEl.textContent = '...';
  nextRound();
});

speakBtn.addEventListener('click', ()=>{
  if (currentAnswer===null){
    speak(languageEl.value==='id'? 'Tekan Mulai Permainan untuk mulai.' : 'Press Start Game to begin.');
  } else {
    speak(languageEl.value==='id'? 'Hitung benda lalu pilih angka yang benar.' : 'Count the objects and pick the right number.');
  }
});

nextBtn.addEventListener('click', ()=>{
  if (currentAnswer===null) return;
  lives -= 1;
  messageEl.textContent = languageEl.value==='id'? 'Dilewati, coba soal berikutnya.' : 'Skipped, next question.';
  speak(messageEl.textContent);
  updateHUD();
  setTimeout(()=>{ nextRound(); }, 700);
});

const observer = new MutationObserver(()=>{
  const correct = choicesEl.querySelector('.choice.correct');
  if (correct){ setTimeout(()=>{ nextRound(); }, 1000); }
});
observer.observe(choicesEl,{childList:true,attributes:true,subtree:true});

// confetti effect
const confettiCanvas = document.getElementById('confetti');
const ctx = confettiCanvas.getContext('2d');
let confettiPieces = [];
function resize(){ confettiCanvas.width=window.innerWidth; confettiCanvas.height=window.innerHeight; }
window.addEventListener('resize',resize); resize();
function launchConfetti(){
  confettiPieces=[];
  for(let i=0;i<100;i++){
    confettiPieces.push({x:Math.random()*confettiCanvas.width,y:Math.random()*confettiCanvas.height/2,dx:Math.random()*4-2,dy:Math.random()*3+2,color:`hsl(${Math.random()*360},100%,50%)`,size:Math.random()*6+4});
  }
  requestAnimationFrame(updateConfetti);
}
function updateConfetti(){
  ctx.clearRect(0,0,confettiCanvas.width,confettiCanvas.height);
  confettiPieces.forEach(p=>{
    ctx.fillStyle=p.color;
    ctx.fillRect(p.x,p.y,p.size,p.size);
    p.x+=p.dx; p.y+=p.dy;
    if(p.y>confettiCanvas.height) p.y=0;
  });
  if(confettiPieces.length>0){ requestAnimationFrame(updateConfetti); }
}

window.addEventListener('keydown',(e)=>{
  if (e.key.toLowerCase()==='s') startBtn.click();
  if (e.key.toLowerCase()==='r') speakBtn.click();
});

updateHUD();
</script></body>
</html>

<!-- Visual Schedule -->
<div class="card">
  <h2>Rutin Harian (Visual schedule)</h2>
  <input id="scheduleInput" placeholder="Contoh: Sikat gigi">
  <button onclick="addSchedule()">Tambah</button>
  <div id="scheduleList"></div>
</div>

<!-- Aksesibilitas -->
<div class="card">
  <h2>Pengaturan Akses</h2>
  <button onclick="document.body.style.fontSize='larger'">Perbesar Teks</button>
  <button onclick="document.body.style.backgroundColor='black';document.body.style.color='white'">Mode Kontras Tinggi</button>
</div>

<p><i>Tips: Gunakan suara nyata (rekam) bila memungkinkan untuk kenyamanan. Tambahkan gambar nyata, audio berkualitas, dan dukungan caregiver.</i></p>

  </div>  <script>
    function speakText(){
      const text=document.getElementById('ttsInput').value;
      speak(text);
    }
    function speak(msg){
      const utter=new SpeechSynthesisUtterance(msg);
      utter.rate=parseFloat(document.getElementById('rate').value);
      speechSynthesis.speak(utter);
    }
    // Schedule
    function addSchedule(){
      const input=document.getElementById('scheduleInput');
      const text=input.value.trim();
      if(text){
        let item=document.createElement('div');
        item.className='schedule-item';
        item.textContent=text;
        document.getElementById('scheduleList').appendChild(item);
        let arr=JSON.parse(localStorage.getItem('schedule')||'[]');
        arr.push(text);
        localStorage.setItem('schedule',JSON.stringify(arr));
        input.value='';
      }
    }
    window.onload=function(){
      let arr=JSON.parse(localStorage.getItem('schedule')||'[]');
      arr.forEach(t=>{
        let item=document.createElement('div');
        item.className='schedule-item';
        item.textContent=t;
        document.getElementById('scheduleList').appendChild(item);
      });
    }
  </script></body>
</html>
